<div class="min-h-screen container mx-auto p-4 sm:p-6 lg:p-8">
  <header class="mb-8">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
      <div class="flex items-center gap-3">
        <svg class="w-10 h-10 text-cyan-400" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M17.5,1.5 C15.02,1.5 13,3.52 13,6 C13,7.76 13.99,9.28 15.45,10.05 C15.93,10.32 16.48,10.5 17.07,10.5 C19.28,10.5 21.07,8.71 21.07,6.5 C21.07,3.95 19.48,1.5 17.5,1.5 Z M8.5,3 C4.92,3 2,5.92 2,9.5 C2,12.13 3.4,14.33 5.5,15.53 C5.5,15.53 5.5,15.53 5.5,15.54 C5.5,15.54 5.5,15.54 5.5,15.54 C7.08,18.41 10.34,21 12,21 C12,21 12,21 12,21 C12,21 12,21 12,21 C12.96,21 13.88,20.81 14.73,20.47 C14.95,20.4 15.17,20.33 15.38,20.25 C15.48,20.21 15.58,20.17 15.68,20.13 C15.68,20.13 15.68,20.13 15.69,20.13 C15.7,20.12 15.7,20.12 15.71,20.12 C15.72,20.12 15.72,20.12 15.73,20.11 C15.74,20.11 15.75,20.1 15.76,20.1 C16.5,19.78 17.18,19.34 17.79,18.82 C17.8,18.81 17.8,18.81 17.81,18.8 C17.82,18.8 17.82,18.8 17.83,18.79 C17.84,18.79 17.85,18.78 17.86,18.77 C19.39,17.43 20.5,15.61 20.5,13.5 C20.5,8.81 16.69,5 12,5 C10.61,5 9.32,5.32 8.18,5.88 C9.1,4.19 10.43,3 12,3 C13.4,3 14.68,3.83 15.5,5.08 C15.82,5.03 16.15,5 16.5,5 C18.98,5 21,7.02 21,9.5 C21,10.99 20.21,12.28 19,13.07 C19,13.07 19,13.07 19,13.07 C18.75,13.23 18.5,13.38 18.24,13.5 C18.24,13.5 18.24,13.5 18.24,13.5 C17.41,13.96 16.5,14.25 15.5,14.25 C13.29,14.25 11.5,12.46 11.5,10.25 C11.5,9.25 11.85,8.34 12.44,7.62 C10.4,6.88 8.5,7.9 8.5,9.5 C8.5,9.91 8.63,10.3 8.86,10.64 C8.62,10.68 8.4,10.7 8.18,10.7 C6.42,10.7 5,9.28 5,7.52 C5,6.01 6.1,4.78 7.5,4.54 C7.1,3.75 6.4,3.25 5.5,3.25 C4.4,3.25 3.5,4.15 3.5,5.25 C3.5,5.88 3.82,6.44 4.31,6.81 C3.5,7.04 3,7.74 3,8.5 C3,9.54 3.8,10.38 4.79,10.49 C4.7,11.3 5.08,12.03 5.75,12.5 C4.5,11.83 3.5,10.75 3.5,9.5 C3.5,8.31 4.29,7.28 5.41,6.96 C5.21,6.34 5.5,5.66 6.09,5.28 C6.49,5.03 6.96,4.91 7.41,4.95 C7.91,3.82 9.09,3 10.5,3 C11.08,3 11.63,3.15 12.12,3.4 C11.4,2.53 10.05,2 8.5,2 C5.46,2 3,4.46 3,7.5 C3,9.55 4.14,11.33 5.86,12.25 C5.03,12.98 4.5,14.01 4.5,15.14 C4.5,16.89 5.67,18.36 7.24,18.88 C6.14,17.43 5.5,15.65 5.5,13.75 C5.5,10.46 7.96,7.75 11,7.75 C11.23,7.75 11.46,7.77 11.68,7.79 C12.35,6.57 13.56,5.75 15,5.75 C16.79,5.75 18.25,7.21 18.25,9 C18.25,10.19 17.65,11.24 16.72,11.82 C17.58,12.68 18.12,13.8 18.12,15 C18.12,16.79 16.86,18.28 15.21,18.66 C15.93,17.79 16.38,16.7 16.38,15.5 C16.38,13.15 14.48,11.25 12.12,11.25 C11.91,11.25 11.7,11.27 11.5,11.3 C10.54,12.06 10,13.2 10,14.5 C10,16.43 11.57,18 13.5,18 C14.07,18 14.6,17.85 15.08,17.58 C14.11,18.45 13.1,19.14 12,19.5 C10.9,19.14 9.89,18.45 8.92,17.58 C9.4,17.85 9.93,18 10.5,18 C12.43,18 14,16.43 14,14.5 C14,13.2 13.46,12.06 12.5,11.3 C12.7,11.27 12.91,11.25 13.12,11.25 C15.48,11.25 17.38,13.15 17.38,15.5 C17.38,16.7 16.93,17.79 16.21,18.66 C17.86,18.28 19.12,16.79 19.12,15 C19.12,13.8 18.58,12.68 17.72,11.82 C18.65,11.24 19.25,10.19 19.25,9 C19.25,7.21 17.79,5.75 16,5.75 C14.56,5.75 13.35,6.57 12.68,7.79 C12.46,7.77 12.23,7.75 12,7.75 C8.96,7.75 6.5,10.46 6.5,13.75 C6.5,15.65 7.14,17.43 8.24,18.88 C6.67,18.36 5.5,16.89 5.5,15.14 C5.5,14.01 6.03,12.98 6.86,12.25 C5.14,11.33 4,9.55 4,7.5 C4,4.46 6.46,2 9.5,2 C11.05,2 12.4,2.53 13.12,3.4 C12.63,3.15 12.08,3 11.5,3 C9.91,3 8.59,3.82 7.59,4.95 C8.04,4.91 8.51,5.03 8.91,5.28 C8.32,5.66 8,6.34 8,6.96 C7.1,7.28 6.5,8.31 6.5,9.5 C6.5,10.75 7.5,11.83 8.75,12.5 C8.08,12.03 7.7,11.3 7.79,10.49 C6.8,10.38 6,9.54 6,8.5 C6,7.74 6.5,7.04 7.31,6.81 C6.82,6.44 6.5,5.88 6.5,5.25 C6.5,4.15 7.4,3.25 8.5,3.25 Z" fill="currentColor"></path>
        </svg>
        <h1 class="text-3xl font-bold text-cyan-400">Agro-IoT Dashboard</h1>
      </div>
      @if(lastUpdated(); as lastUpdate) {
        <div class="text-sm text-slate-500 mt-2 sm:mt-0">
            Última actualización: {{ lastUpdate | date:'mediumTime' }}
        </div>
      }
    </div>
  </header>

  <main>
    <!-- Summary Cards -->
    <section class="grid grid-cols-2 md:grid-cols-5 gap-4 md:gap-6 mb-8">
      <div class="bg-slate-800 p-4 rounded-lg shadow-lg flex flex-col items-center justify-center">
        <span class="text-4xl font-bold text-white">{{ totalZones() }}</span>
        <span class="text-sm text-slate-400 mt-1 text-center">Sensores Activos</span>
      </div>
      <div class="bg-cyan-600/20 border border-cyan-500 p-4 rounded-lg shadow-lg flex flex-col items-center justify-center">
        <span class="text-4xl font-bold text-cyan-400">{{ averageTemperature() }}°C</span>
        <span class="text-sm text-cyan-300 mt-1 text-center">Temp. Promedio</span>
      </div>
      <div class="bg-green-600/20 border border-green-500 p-4 rounded-lg shadow-lg flex flex-col items-center justify-center">
        <span class="text-4xl font-bold text-green-400">{{ optimalZones() }}</span>
        <span class="text-sm text-green-300 mt-1 text-center">Estado Óptimo</span>
      </div>
      <div class="bg-yellow-600/20 border border-yellow-500 p-4 rounded-lg shadow-lg flex flex-col items-center justify-center">
        <span class="text-4xl font-bold text-yellow-400">{{ alertZones() }}</span>
        <span class="text-sm text-yellow-300 mt-1 text-center">En Alerta</span>
      </div>
      <div class="bg-red-600/20 border border-red-500 p-4 rounded-lg shadow-lg flex flex-col items-center justify-center">
        <span class="text-4xl font-bold text-red-400">{{ criticalZones() }}</span>
        <span class="text-sm text-red-300 mt-1 text-center">Peligro Crítico</span>
      </div>
    </section>

    <!-- Sensor Grid -->
    @if (zones().length > 0) {
      <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        @for (zone of zones(); track zone.zoneId) {
          <app-sensor-card [zone]="zone"></app-sensor-card>
        }
      </section>
    } @else {
       <div class="flex flex-col items-center justify-center text-center bg-slate-800 p-8 rounded-lg">
        <svg class="animate-spin h-10 w-10 text-cyan-400 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <p class="text-slate-400">Conectando con los sensores...</p>
      </div>
    }
  </main>

  <footer class="text-center text-slate-600 mt-12 py-4">
    <p>Panel de Monitoreo Agro-IoT v1.0</p>
  </footer>
</div>